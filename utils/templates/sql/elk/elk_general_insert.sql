set search_path = biohub;
set schema 'biohub';

do $$
	declare
		_template_id integer; -- set after tempalte is created
		_template_name varchar := 'Elk Aerial General Recruitment Composition Survey';
		_template_version varchar := '2.0';
		_tempalte_description varchar := '';
		
		_taxonomy_ids integer[] := array[35370, 35371]; -- wild taxonomic IDs from elastic search
		_taxonomy_id integer; -- used as an index in the loop, do not set

		_validation_schema varchar := $v_s${"name":"","description":"","files":[{"name":"Effort & Site Conditions","description":"","validations":[{"file_duplicate_columns_validator":{}}],"columns":[{"name":"Aircraft Type","description":"","validations":[{"column_code_validator":{"name":{"type":"string"},"description":{"type":"string"},"allowed_code_values":[{"name":"Bell JetRanger","description":"Bell JetRanger"},{"name":"Bell JetRanger without bubble window","description":"Bell JetRanger without bubble window"},{"name":"Bell JetRanger with bubble window","description":"Bell JetRanger with bubble window"},{"name":"Bell LongRanger","description":"Bell LongRanger"},{"name":"Hiller 12E4","description":"Hiller 12E4"},{"name":"Hughes 500D","description":"Hughes 500D"},{"name":"Cessna 172","description":"Cessna 172"},{"name":"Cessna 180","description":"Cessna 180"},{"name":"Cessna 182","description":"Cessna 182"},{"name":"Cessna 185","description":"Cessna 185"},{"name":"Cessna 206","description":"Cessna 206"},{"name":"Super Cub","description":"Super Cub"},{"name":"Beaver","description":"Beaver"},{"name":"Single Otter","description":"Single Otter"},{"name":"Twin Otter","description":"Twin Otter"},{"name":"Bell 406","description":"Bell 406"},{"name":"A-Star","description":"A-Star"}]}}]}]},{"name":"Observations","description":"","validations":[{"file_duplicate_columns_validator":{}},{"file_required_columns_validator":{"required_columns":["Study Area","Date","Species"]}}],"columns":[{"name":"UTM Zone","description":"","validations":[{"column_code_validator":{"name":{"type":"string"},"description":{"type":"string"},"allowed_code_values":[{"name":"7","description":"7"},{"name":"8","description":"8"},{"name":"9","description":"9"},{"name":"10","description":"10"},{"name":"11","description":"11"}]}}]},{"name":"Easting","description":"","validations":[{"column_format_validator":{"reg_exp":"^[0-9]{6,6}$","reg_exp_flags":"g","expected_format":"Easting needs to be a 6 digit number. For example: 123456."}}]},{"name":"Northing","description":"","validations":[{"column_format_validator":{"reg_exp":"^[0-9]{7,7}$","reg_exp_flags":"g","expected_format":"Northing needs to be a 7 digit number. For example: 1234567."}}]},{"name":"Datum","description":"","validations":[{"column_code_validator":{"name":{"type":"string"},"description":{"type":"string"},"allowed_code_values":[{"name":"NAD83","description":"NAD83"},{"name":"NAD27","description":"NAD27"},{"name":"WGS84","description":"WGS84"}]}}]},{"name":"Lat (DD)","description":"","validations":[{"column_numeric_validator":{"name":"","description":""}}]},{"name":"Long (DD)","description":"","validations":[{"column_numeric_validator":{"name":"","description":""}}]},{"name":"Species","description":"","validations":[{"column_code_validator":{"name":{"type":"string"},"description":{"type":"string"},"allowed_code_values":[{"name":"M-CEEL","description":"M-CEEL"},{"name":"M-CEEL-RO","description":"M-CEEL-RO"}]}}]},{"name":"BC RISC Yearlings Bulls","description":"","validations":[{"column_numeric_validator":{"name":"","description":""}}]},{"name":"BC RISC Class I Bulls","description":"","validations":[{"column_numeric_validator":{"name":"","description":""}}]},{"name":"BC RISC Class II Bulls","description":"","validations":[{"column_numeric_validator":{"name":"","description":""}}]},{"name":"BC RISC Class III Bulls","description":"","validations":[{"column_numeric_validator":{"name":"","description":""}}]},{"name":"BC RISC Class IV Bulls","description":"","validations":[{"column_numeric_validator":{"name":"","description":""}}]},{"name":"Spike Bulls","description":"","validations":[{"column_numeric_validator":{"name":"","description":""}}]},{"name":"Raghorn Bulls","description":"","validations":[{"column_numeric_validator":{"name":"","description":""}}]},{"name":"<=3 Point Bulls","description":"","validations":[{"column_numeric_validator":{"name":"","description":""}}]},{"name":"3 - 4 Point Bulls","description":"","validations":[{"column_numeric_validator":{"name":"","description":""}}]},{"name":"3 - 5 Point Bulls","description":"","validations":[{"column_numeric_validator":{"name":"","description":""}}]},{"name":"<4 Point Bulls","description":"","validations":[{"column_numeric_validator":{"name":"","description":""}}]},{"name":">=4 Point Bulls","description":"","validations":[{"column_numeric_validator":{"name":"","description":""}}]},{"name":"5 Point Bulls","description":"","validations":[{"column_numeric_validator":{"name":"","description":""}}]},{"name":">=5 Point Bulls","description":"","validations":[{"column_numeric_validator":{"name":"","description":""}}]},{"name":">= 6 Point Bulls","description":"","validations":[{"column_numeric_validator":{"name":"","description":""}}]},{"name":"Adult Bulls - Unclassified","description":"","validations":[{"column_numeric_validator":{"name":"","description":""}}]},{"name":"Unclassified Bulls","description":"","validations":[{"column_numeric_validator":{"name":"","description":""}}]},{"name":"Cows","description":"","validations":[{"column_numeric_validator":{"name":"","description":""}}]},{"name":"Calves","description":"","validations":[{"column_numeric_validator":{"name":"","description":""}}]},{"name":"Adult Unclassified Sex","description":"","validations":[{"column_numeric_validator":{"name":"","description":""}}]},{"name":"Yearling - Unclassified Sex","description":"","validations":[{"column_numeric_validator":{"name":"","description":""}}]},{"name":"Unclassified Age/Sex","description":"","validations":[{"column_numeric_validator":{"name":"","description":""}}]},{"name":"Sign Type","description":"","validations":[{"column_code_validator":{"name":{"type":"string"},"description":{"type":"string"},"allowed_code_values":[{"name":"Antler","description":"Antler"},{"name":"Bed","description":"Bed"},{"name":"Body Parts","description":"Body Parts"},{"name":"Trail","description":"Trail"},{"name":"Tracks","description":"Tracks"},{"name":"Carcass","description":"Carcass"},{"name":"Scratchings","description":"Scratchings"},{"name":"Hair","description":"Hair"},{"name":"Excrement","description":"Excrement"},{"name":"Cache","description":"Cache"},{"name":"Egg Shell","description":"Egg Shell"},{"name":"Feeding","description":"Feeding"},{"name":"Feather","description":"Feather"},{"name":"Pellet Group","description":"Pellet Group"},{"name":"Regurgitated Pellet","description":"Regurgitated Pellet"},{"name":"Shed Skin","description":"Shed Skin"},{"name":"Whitewash","description":"Whitewash"},{"name":"Described in Comments","description":"Pellet Group"}]}}]},{"name":"Sign Count","description":"","validations":[{"column_numeric_validator":{"name":"","description":""}}]},{"name":"Age of Sign","description":"","validations":[{"column_code_validator":{"name":{"type":"string"},"description":{"type":"string"},"allowed_code_values":[{"name":"New","description":"New"},{"name":"Old","description":"Old"},{"name":"Hour","description":"Hour"},{"name":"Day","description":"Day"},{"name":"Week","description":"Week"},{"name":"Month","description":"Month"},{"name":"Year","description":"Year"},{"name":"Unclassified","description":"Unclassified"},{"name":"Described in Comments","description":"Described in Comments"}]}}]},{"name":"Veg Cover (%)","description":"","validations":[{"column_numeric_validator":{"name":"","description":""}}]},{"name":"Snow Cover (%)","description":"","validations":[{"column_numeric_validator":{"name":"","description":""}}]},{"name":"Activity","description":"","validations":[{"column_code_validator":{"name":{"type":"string"},"description":{"type":"string"},"allowed_code_values":[{"name":"Standing","description":"Standing"},{"name":"Bedding","description":"Bedding"},{"name":"Running","description":"Running"},{"name":"Walking","description":"Walking"},{"name":"Moving","description":"Moving"},{"name":"Not Moving","description":"Not Moving"}]}}]},{"name":"Number of Marked Animals Observed","description":"","validations":[{"column_numeric_validator":{"name":"","description":""}}]},{"name":"Survey or Telemetry Search","description":"","validations":[{"column_code_validator":{"name":{"type":"string"},"description":{"type":"string"},"allowed_code_values":[{"name":"Survey","description":"Survey"},{"name":"Telemetry","description":"Telemetry"}]}}]}]},{"name":"Marked Animals","description":"","validations":[{"file_duplicate_columns_validator":{}}],"columns":[{"name":"Targeted or Non-Targeted","description":"","validations":[{"column_code_validator":{"name":{"type":"string"},"description":{"type":"string"},"allowed_code_values":[{"name":"Targeted","description":"Targeted"},{"name":"Non-Targeted","description":"Non-Targeted"}]}}]},{"name":"Frequency Unit","description":"","validations":[{"column_code_validator":{"name":{"type":"string"},"description":{"type":"string"},"allowed_code_values":[{"name":"KHz","description":"KHz"},{"name":"MHz","description":"MHz"},{"name":"Hz","description":"Hz"}]}}]}]},{"name":"Incidental Observations","description":"","validations":[{"file_duplicate_columns_validator":{}}],"columns":[{"name":"UTM Zone","description":"","validations":[{"column_code_validator":{"name":{"type":"string"},"description":{"type":"string"},"allowed_code_values":[{"name":"7","description":"7"},{"name":"8","description":"8"},{"name":"9","description":"9"},{"name":"10","description":"10"},{"name":"11","description":"11"}]}}]},{"name":"Easting","description":"","validations":[{"column_format_validator":{"reg_exp":"^[0-9]{6,6}$","reg_exp_flags":"g","expected_format":"Easting needs to be a 6 digit number. For example: 123456."}}]},{"name":"Northing","description":"","validations":[{"column_format_validator":{"reg_exp":"^[0-9]{7,7}$","reg_exp_flags":"g","expected_format":"Northing needs to be a 7 digit number. For example: 1234567."}}]},{"name":"Datum","description":"","validations":[{"column_code_validator":{"name":{"type":"string"},"description":{"type":"string"},"allowed_code_values":[{"name":"NAD83","description":"NAD83"},{"name":"NAD27","description":"NAD27"},{"name":"WGS84","description":"WGS84"}]}}]},{"name":"Lat (DD)","description":"","validations":[{"column_numeric_validator":{"name":"","description":""}}]},{"name":"Long (DD)","description":"","validations":[{"column_numeric_validator":{"name":"","description":""}}]},{"name":"Adult Males","description":"","validations":[{"column_numeric_validator":{"name":"","description":""}}]},{"name":"Adult Females","description":"","validations":[{"column_numeric_validator":{"name":"","description":""}}]},{"name":"Adults - Unclassified Sex","description":"","validations":[{"column_numeric_validator":{"name":"","description":""}}]},{"name":"Juvenile Males","description":"","validations":[{"column_numeric_validator":{"name":"","description":""}}]},{"name":"Juvenile Females","description":"","validations":[{"column_numeric_validator":{"name":"","description":""}}]},{"name":"Juveniles - Unclassified Sex","description":"","validations":[{"column_numeric_validator":{"name":"","description":""}}]},{"name":"Unknown Age/Sex","description":"","validations":[{"column_numeric_validator":{"name":"","description":""}}]},{"name":"Species Occurrence Status","description":"","validations":[{"column_code_validator":{"name":{"type":"string"},"description":{"type":"string"},"allowed_code_values":[{"name":"Present","description":"Present"},{"name":"Absent","description":"Absent"}]}}]},{"name":"Activity","description":""},{"name":"Activity Count","description":"","validations":[{"column_numeric_validator":{"name":"","description":""}}]},{"name":"Feature Type","description":"","validations":[{"column_code_validator":{"name":{"type":"string"},"description":{"type":"string"},"allowed_code_values":[{"name":"Breeding Site","description":"Breeding Site"},{"name":"Maternity Roost","description":"Maternity Roost"},{"name":"Bat Nursery Roost","description":"Bat Nursery Roost"},{"name":"Rookery","description":"Rookery"},{"name":"Courting Site","description":"Courting Site"},{"name":"Feeding Site","description":"Feeding Site"},{"name":"Resting Site","description":"Resting Site"},{"name":"Staging Site","description":"Staging Site"},{"name":"Ungulate Winter Range","description":"Ungulate Winter Range"},{"name":"Hibernaculum","description":"Hibernaculum"},{"name":"Roost","description":"Roost"},{"name":"Wallow","description":"Wallow"},{"name":"Mineral Lick","description":"Mineral Lick"},{"name":"Burrow","description":"Burrow"},{"name":"Den","description":"Den"},{"name":"Lodge","description":"Lodge"},{"name":"Nest","description":"Nest"},{"name":"Nest Tree","description":"Nest Tree"},{"name":"Plant Community","description":"Plant Community"},{"name":"Plant Site","description":"Plant Site"},{"name":"Hot Spring","description":"Hot Spring"},{"name":"Water","description":"Water"},{"name":"Fisheries Sensitive Feature","description":"Fisheries Sensitive Feature"},{"name":"Marine Sensitive Feature","description":"Marine Sensitive Feature"},{"name":"Described in Comments","description":"Pellet Group"}]}}]},{"name":"Feature Type Count","description":"","validations":[{"column_numeric_validator":{"name":"","description":""}}]},{"name":"Sign Type","description":"","validations":[{"column_code_validator":{"name":{"type":"string"},"description":{"type":"string"},"allowed_code_values":[{"name":"Antler","description":"Antler"},{"name":"Bed","description":"Bed"},{"name":"Body Parts","description":"Body Parts"},{"name":"Trail","description":"Trail"},{"name":"Tracks","description":"Tracks"},{"name":"Carcass","description":"Carcass"},{"name":"Scratchings","description":"Scratchings"},{"name":"Hair","description":"Hair"},{"name":"Excrement","description":"Excrement"},{"name":"Cache","description":"Cache"},{"name":"Egg Shell","description":"Egg Shell"},{"name":"Feeding","description":"Feeding"},{"name":"Feather","description":"Feather"},{"name":"Pellet Group","description":"Pellet Group"},{"name":"Regurgitated Pellet","description":"Regurgitated Pellet"},{"name":"Shed Skin","description":"Shed Skin"},{"name":"Whitewash","description":"Whitewash"},{"name":"Described in Comments","description":"Pellet Group"}]}}]},{"name":"Sign Count","description":"","validations":[{"column_numeric_validator":{"name":"","description":""}}]}]}],"validations":[{"submission_required_files_validator":{"required_files":["Effort & Site Conditions","Observations","Marked Animals","Incidental Observations"]}}],"workbookValidations":[{"workbook_parent_child_key_match_validator":{"child_worksheet_name":"Marked Animals","parent_worksheet_name":"Observations","column_names":["Group Label"]}}]}$v_s$;
		_transformation_schema varchar := $t_s${"templateMeta":[{"sheetName":"Observations","primaryKey":["Study Area","Block ID/SU ID"],"parentKey":[],"type":"root","foreignKeys":[{"sheetName":"Marked Animals","primaryKey":["Group Label"]}]},{"sheetName":"Marked Animals","primaryKey":["Wildlife Health ID","Animal ID","Telemetry Device ID"],"parentKey":["Group Label"],"type":"","foreignKeys":[]}],"dwcMeta":[{"sheetName":"record","primaryKey":["eventID"]},{"sheetName":"event","primaryKey":["eventID"]},{"sheetName":"location","primaryKey":["eventID"]},{"sheetName":"occurrence","primaryKey":["occurrenceID"]},{"sheetName":"organism","primaryKey":["organismID"]},{"sheetName":"measurementOrFact","primaryKey":["eventID","measurementID","occurrenceID","organismID"]}],"map":[{"sheetName":"record","fields":[{"columnName":"eventId","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"basisOfRecord ","columnValue":[{"static":"HumanObservation"}]}]},{"sheetName":"event","fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"eventDate","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Date']"]}]},{"columnName":"eventRemarks","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Observation Comments']"]}]}]},{"sheetName":"location","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['_key']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"verbatimCoordinates","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['UTM Zone,Easting,Northing']"],"join":" "},{"paths":["$..[?(@._name === 'Observations')]..['Lat (DD),Long (DD)']"],"join":" "}]},{"columnName":"decimalLatitude","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Lat (DD)']"]}]},{"columnName":"decimalLongitude","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Long (DD)']"]}]},{"columnName":"verbatimSRS","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Datum']"]}]}]},{"sheetName":"occurrence","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['BC RISC Yearling Bulls']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"0"}}]},{"columnName":"individualCount","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['BC RISC Yearling Bulls']"]}]},{"columnName":"sex","columnValue":[{"static":"male"}]},{"columnName":"lifeStage","columnValue":[{"static":"yearling"}]},{"columnName":"taxonID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Species']"]}]},{"columnName":"occurrenceRemarks","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Observation Comments']"]}]}],"add":[{"sheetName":"measurementOrFact","fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"antler-configuration"}}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"0"}}]},{"columnName":"measurementType","columnValue":[{"static":"Antler Configuration"}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]},{"columnName":"measurementValue","columnValue":[{"static":"BC RISC Yearling Bulls"}]}]}]},{"sheetName":"occurrence","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['BC RISC Class I Bulls']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"1"}}]},{"columnName":"individualCount","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['BC RISC Class I Bulls']"]}]},{"columnName":"sex","columnValue":[{"static":"male"}]},{"columnName":"lifeStage","columnValue":[{"static":"unknown"}]},{"columnName":"taxonID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Species']"]}]},{"columnName":"occurrenceRemarks","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Observation Comments']"]}]}],"add":[{"sheetName":"measurementOrFact","fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"antler-configuration"}}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"1"}}]},{"columnName":"measurementType","columnValue":[{"static":"Antler Configuration"}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]},{"columnName":"measurementValue","columnValue":[{"static":"BC RISC Class I"}]}]}]},{"sheetName":"occurrence","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['BC RISC Class I Bulls']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"2"}}]},{"columnName":"individualCount","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['BC RISC Class II Bulls']"]}]},{"columnName":"sex","columnValue":[{"static":"male"}]},{"columnName":"lifeStage","columnValue":[{"static":"unknown"}]},{"columnName":"taxonID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Species']"]}]},{"columnName":"occurrenceRemarks","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Observation Comments']"]}]}],"add":[{"sheetName":"measurementOrFact","fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"antler-configuration"}}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"2"}}]},{"columnName":"measurementType","columnValue":[{"static":"Antler Configuration"}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]},{"columnName":"measurementValue","columnValue":[{"static":"BC RISC Class II"}]}]}]},{"sheetName":"occurrence","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['BC RISC Class III Bulls']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"3"}}]},{"columnName":"individualCount","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['BC RISC Class III Bulls']"]}]},{"columnName":"sex","columnValue":[{"static":"male"}]},{"columnName":"lifeStage","columnValue":[{"static":"adult"}]},{"columnName":"taxonID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Species']"]}]},{"columnName":"occurrenceRemarks","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Observation Comments']"]}]}],"add":[{"sheetName":"measurementOrFact","fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"antler-configuration"}}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"3"}}]},{"columnName":"measurementType","columnValue":[{"static":"Antler Configuration"}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]},{"columnName":"measurementValue","columnValue":[{"static":"BC RISC Class III"}]}]}]},{"sheetName":"occurrence","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['BC RISC Class IV Bulls']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"4"}}]},{"columnName":"individualCount","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['BC RISC Class IV Bulls']"]}]},{"columnName":"sex","columnValue":[{"static":"male"}]},{"columnName":"lifeStage","columnValue":[{"static":"adult"}]},{"columnName":"taxonID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Species']"]}]},{"columnName":"occurrenceRemarks","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Observation Comments']"]}]}],"add":[{"sheetName":"measurementOrFact","fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"antler-configuration"}}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"4"}}]},{"columnName":"measurementType","columnValue":[{"static":"Antler Configuration"}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]},{"columnName":"measurementValue","columnValue":[{"static":"BC RISC Class IV"}]}]}]},{"sheetName":"occurrence","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['Spike Bulls']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"5"}}]},{"columnName":"individualCount","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Spike Bulls']"]}]},{"columnName":"sex","columnValue":[{"static":"male"}]},{"columnName":"lifeStage","columnValue":[{"static":"unknown"}]},{"columnName":"taxonID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Species']"]}]},{"columnName":"occurrenceRemarks","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Observation Comments']"]}]}],"add":[{"sheetName":"measurementOrFact","fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"antler-configuration"}}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"5"}}]},{"columnName":"measurementType","columnValue":[{"static":"Antler Configuration"}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]},{"columnName":"measurementValue","columnValue":[{"static":"Spike antlers"}]}]}]},{"sheetName":"occurrence","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['Raghorn Bulls']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"6"}}]},{"columnName":"individualCount","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Raghorn Bulls']"]}]},{"columnName":"sex","columnValue":[{"static":"male"}]},{"columnName":"lifeStage","columnValue":[{"static":"unknown"}]},{"columnName":"taxonID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Species']"]}]},{"columnName":"occurrenceRemarks","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Observation Comments']"]}]}],"add":[{"sheetName":"measurementOrFact","fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"antler-configuration"}}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"6"}}]},{"columnName":"measurementType","columnValue":[{"static":"Antler Configuration"}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]},{"columnName":"measurementValue","columnValue":[{"static":"Raghorn antlers"}]}]}]},{"sheetName":"occurrence","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['<=3 Point Bulls']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"7"}}]},{"columnName":"individualCount","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['<=3 Point Bulls']"]}]},{"columnName":"sex","columnValue":[{"static":"male"}]},{"columnName":"lifeStage","columnValue":[{"static":"unknown"}]},{"columnName":"taxonID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Species']"]}]},{"columnName":"occurrenceRemarks","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Observation Comments']"]}]}],"add":[{"sheetName":"measurementOrFact","fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"antler-configuration"}}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"7"}}]},{"columnName":"measurementType","columnValue":[{"static":"Antler Configuration"}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]},{"columnName":"measurementValue","columnValue":[{"static":"3 points or fewer"}]}]}]},{"sheetName":"occurrence","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['3 - 4 Point Bulls']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"8"}}]},{"columnName":"individualCount","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['3 - 4 Point Bulls']"]}]},{"columnName":"sex","columnValue":[{"static":"male"}]},{"columnName":"lifeStage","columnValue":[{"static":"unknown"}]},{"columnName":"taxonID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Species']"]}]},{"columnName":"occurrenceRemarks","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Observation Comments']"]}]}],"add":[{"sheetName":"measurementOrFact","fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"antler-configuration"}}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"8"}}]},{"columnName":"measurementType","columnValue":[{"static":"Antler Configuration"}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]},{"columnName":"measurementValue","columnValue":[{"static":"3 or 4 points"}]}]}]},{"sheetName":"occurrence","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['3 - 5 Point Bulls']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"9"}}]},{"columnName":"individualCount","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['3 - 5 Point Bulls']"]}]},{"columnName":"sex","columnValue":[{"static":"male"}]},{"columnName":"lifeStage","columnValue":[{"static":"unknown"}]},{"columnName":"taxonID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Species']"]}]},{"columnName":"occurrenceRemarks","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Observation Comments']"]}]}],"add":[{"sheetName":"measurementOrFact","fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"antler-configuration"}}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"9"}}]},{"columnName":"measurementType","columnValue":[{"static":"Antler Configuration"}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]},{"columnName":"measurementValue","columnValue":[{"static":"3 or 4 or 5 points"}]}]}]},{"sheetName":"occurrence","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['<4 Point Bulls']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"10"}}]},{"columnName":"individualCount","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['<4 Point Bulls']"]}]},{"columnName":"sex","columnValue":[{"static":"male"}]},{"columnName":"lifeStage","columnValue":[{"static":"unknown"}]},{"columnName":"taxonID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Species']"]}]},{"columnName":"occurrenceRemarks","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Observation Comments']"]}]}],"add":[{"sheetName":"measurementOrFact","fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"antler-configuration"}}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"10"}}]},{"columnName":"measurementType","columnValue":[{"static":"Antler Configuration"}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]},{"columnName":"measurementValue","columnValue":[{"static":"fewer than 4 points"}]}]}]},{"sheetName":"occurrence","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['>=4 Point Bulls']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"11"}}]},{"columnName":"individualCount","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['>=4 Point Bulls']"]}]},{"columnName":"sex","columnValue":[{"static":"male"}]},{"columnName":"lifeStage","columnValue":[{"static":"unknown"}]},{"columnName":"taxonID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Species']"]}]},{"columnName":"occurrenceRemarks","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Observation Comments']"]}]}],"add":[{"sheetName":"measurementOrFact","fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"antler-configuration"}}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"11"}}]},{"columnName":"measurementType","columnValue":[{"static":"Antler Configuration"}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]},{"columnName":"measurementValue","columnValue":[{"static":"4 points or more"}]}]}]},{"sheetName":"occurrence","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['5 Point Bulls']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"12"}}]},{"columnName":"individualCount","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['5 Point Bulls']"]}]},{"columnName":"sex","columnValue":[{"static":"male"}]},{"columnName":"lifeStage","columnValue":[{"static":"adult"}]},{"columnName":"taxonID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Species']"]}]},{"columnName":"occurrenceRemarks","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Observation Comments']"]}]}],"add":[{"sheetName":"measurementOrFact","fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"antler-configuration"}}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"12"}}]},{"columnName":"measurementType","columnValue":[{"static":"Antler Configuration"}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]},{"columnName":"measurementValue","columnValue":[{"static":"5 points"}]}]}]},{"sheetName":"occurrence","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['>=5 Point Bulls']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"13"}}]},{"columnName":"individualCount","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['>=5 Point Bulls']"]}]},{"columnName":"sex","columnValue":[{"static":"male"}]},{"columnName":"lifeStage","columnValue":[{"static":"adult"}]},{"columnName":"taxonID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Species']"]}]},{"columnName":"occurrenceRemarks","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Observation Comments']"]}]}],"add":[{"sheetName":"measurementOrFact","fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"antler-configuration"}}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"13"}}]},{"columnName":"measurementType","columnValue":[{"static":"Antler Configuration"}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]},{"columnName":"measurementValue","columnValue":[{"static":"5 points or more"}]}]}]},{"sheetName":"occurrence","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['>= 6 Point Bulls']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"14"}}]},{"columnName":"individualCount","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['>=6 Point Bulls']"]}]},{"columnName":"sex","columnValue":[{"static":"male"}]},{"columnName":"lifeStage","columnValue":[{"static":"adult"}]},{"columnName":"taxonID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Species']"]}]},{"columnName":"occurrenceRemarks","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Observation Comments']"]}]}],"add":[{"sheetName":"measurementOrFact","fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"antler-configuration"}}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"14"}}]},{"columnName":"measurementType","columnValue":[{"static":"Antler Configuration"}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]},{"columnName":"measurementValue","columnValue":[{"static":"6 points or more"}]}]}]},{"sheetName":"occurrence","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['Adult Bulls - Unclassified']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"15"}}]},{"columnName":"individualCount","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Adult Bulls - Unclassified']"]}]},{"columnName":"sex","columnValue":[{"static":"male"}]},{"columnName":"lifeStage","columnValue":[{"static":"adult"}]},{"columnName":"taxonID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Species']"]}]},{"columnName":"occurrenceRemarks","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Observation Comments']"]}]}],"add":[{"sheetName":"measurementOrFact","fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"antler-configuration"}}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"15"}}]},{"columnName":"measurementType","columnValue":[{"static":"Antler Configuration"}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]},{"columnName":"measurementValue","columnValue":[{"static":"unknown"}]}]}]},{"sheetName":"occurrence","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['Unclassified Bulls']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"16"}}]},{"columnName":"individualCount","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Unclassified Bulls']"]}]},{"columnName":"sex","columnValue":[{"static":"male"}]},{"columnName":"lifeStage","columnValue":[{"static":"adult"}]},{"columnName":"taxonID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Species']"]}]},{"columnName":"occurrenceRemarks","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Observation Comments']"]}]}],"add":[{"sheetName":"measurementOrFact","fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"measurementID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"antler-configuration"}}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"16"}}]},{"columnName":"measurementType","columnValue":[{"static":"Antler Configuration"}]},{"columnName":"measurementUnit","columnValue":[{"static":""}]},{"columnName":"measurementValue","columnValue":[{"static":"unknown"}]}]}]},{"sheetName":"occurrence","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['Cows']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"17"}}]},{"columnName":"individualCount","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Cows']"]}]},{"columnName":"sex","columnValue":[{"static":"female"}]},{"columnName":"lifeStage","columnValue":[{"static":"adult"}]},{"columnName":"taxonID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Species']"]}]},{"columnName":"occurrenceRemarks","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Observation Comments']"]}]}]},{"sheetName":"occurrence","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['Calves']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"18"}}]},{"columnName":"individualCount","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Calves']"]}]},{"columnName":"sex","columnValue":[{"static":"unknown"}]},{"columnName":"lifeStage","columnValue":[{"static":"juvenile"}]},{"columnName":"taxonID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Species']"]}]},{"columnName":"occurrenceRemarks","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Observation Comments']"]}]}]},{"sheetName":"occurrence","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['Adult Unclassified Sex']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"19"}}]},{"columnName":"individualCount","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Adult Unclassified Sex']"]}]},{"columnName":"sex","columnValue":[{"static":"unknown"}]},{"columnName":"lifeStage","columnValue":[{"static":"adult"}]},{"columnName":"taxonID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Species']"]}]},{"columnName":"occurrenceRemarks","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Observation Comments']"]}]}]},{"sheetName":"occurrence","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['Yearling - Unclassified Sex']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"20"}}]},{"columnName":"individualCount","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Yearling - Unclassified Sex']"]}]},{"columnName":"sex","columnValue":[{"static":"unknown"}]},{"columnName":"lifeStage","columnValue":[{"static":"yearling"}]},{"columnName":"taxonID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Species']"]}]},{"columnName":"occurrenceRemarks","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Observation Comments']"]}]}]},{"sheetName":"occurrence","condition":{"type":"and","checks":[{"ifNotEmpty":"$..[?(@._name === 'Observations')]..['Unclassified Age/Sex']"}]},"fields":[{"columnName":"eventID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"]}]},{"columnName":"occurrenceID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['_key']","$..[?(@._name === 'Observations')]..['_row']"],"postfix":{"static":"21"}}]},{"columnName":"individualCount","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Unclassified Age/Sex']"]}]},{"columnName":"sex","columnValue":[{"static":"unknown"}]},{"columnName":"lifeStage","columnValue":[{"static":"unknown"}]},{"columnName":"taxonID","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Species']"]}]},{"columnName":"occurrenceRemarks","columnValue":[{"paths":["$..[?(@._name === 'Observations')]..['Observation Comments']"]}]}]}]}$t_s$;
begin
	INSERT INTO
	  template (name, version, record_effective_date, description)
	VALUES
	  (_template_name, _template_version, now(), _tempalte_description)
	RETURNING template_id into _template_id;

	FOREACH _taxonomy_id IN ARRAY _taxonomy_ids LOOP 
		INSERT INTO
			template_methodology_species (field_method_id, wldtaxonomic_units_id, template_id, validation, transform)
		VALUES
			(
				null,
				_taxonomy_id,
				_template_id,
				_validation_schema::json,
				_transformation_schema::json
			);
  END LOOP;
	RAISE NOTICE 'All done!';
end $$